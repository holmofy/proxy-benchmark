version: '3.9'

services:
  backend:
    image: jmalloc/echo-server
    ports:
    - "9394:8080"
    deploy:
      resources:
        limits:
          cpus: "4.0"
          memory: 512M
  silverwind:
    image: lsk569937453/silverwind:0.0.6
    environment:
      CONFIG_FILE_PATH: /data/app/app_config.yaml
      RUST_BACKTRACE: 1J
      JEMALLOC_SYS_WITH_MALLOC_CONF: abort_conf:true,dirty_decay_ms:0,muzzy_decay_ms:0
    container_name: silverwind
    volumes:
    - ./app_config.yaml:/data/app/app_config.yaml
    restart: unless-stopped
    ports:
      - 6667:6667
      - 8870:8870
    deploy:
      resources:
        limits:
          cpus: "4.0"
          memory: 512M
